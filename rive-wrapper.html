<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Rive demo – portrait 9 × 16</title>

  <style>
    /* ❶ centre the wrapper and keep it inside the viewport */
    .embed-wrapper{
      aspect-ratio: 9 / 16;      /* 720 × 1280 portrait               */
      width:  min(720px, 100%);  /* don’t grow wider than the design  */
      height: min(1280px, 90vh); /* and never exceed the viewport     */
      margin: 0 auto;
      position: relative;
    }

    /* ❷ make the canvas fill the wrapper exactly – no distortion */
    .embed-wrapper canvas{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      border:0;
    }
  </style>

  <!-- Rive 2 runtime (canvas renderer) -->
  <script src="https://unpkg.com/@rive-app/canvas@2"></script>
</head>
<body>

  <div class="embed-wrapper">
    <canvas id="rive"></canvas>
  </div>

  <script>
    const riveGame = new rive.Rive({
      src: "./lane_catcher_2.riv",
      canvas: document.getElementById("rive"),
      stateMachines: "State Machine 1",
      autoplay: true,

      onLoad: () => {
        /* build a quick lookup table of inputs -------------------------- */
        const inputs = {};
        riveGame.stateMachineInputs("State Machine 1")
                .forEach(i => inputs[i.name] = i);

        /* helper wrappers (nicer to read) ------------------------------- */
        const setBool = (name, v) => inputs[name] && (inputs[name].value = !!v);
        const setNum  = (name, n) => inputs[name] && (inputs[name].value = +n);
        const trig    = name      => inputs[name]?.fire?.();

        /* 1 - initial state -------------------------------------------- */
        setBool("restart game bool",     false);
        setBool("start game",            false);
        setBool("lanes active",          true);
        setBool("balls active",          true);
        setBool("balls active level 2",  false);
        setBool("balls active level 3",  false);
        setBool("miss bool",             false);
        setBool("lane 1 on-off",         true);
        setBool("lane 2 on-off",         true);
        setBool("lane 3 on-off",         true);
        setBool("difficulty level up 1 bool", false);
        setBool("difficulty level up 2 bool", false);
        setNum ("baskets",               0);

        /* 2 - simple keyboard demo ------------------------------------- */
        window.addEventListener("keydown", e => {
          if (e.code === "Space") {
            trig   ("game reset trig");
            setBool("restart game bool", true);
            setTimeout(() => setBool("restart game bool", false), 100); // momentary
          }
        });
      }
    });
  </script>

</body>
</html>
